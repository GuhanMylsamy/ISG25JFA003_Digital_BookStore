<header class="header" [class.scrolled]="isScrolled">
  <div class="navbar-container">
    <div class="logo">
      <div class="w-10 h-10 bg-[#ff5722] rounded-full flex items-center justify-center mx-25">
        <span class="material-icons text-3xl text-white">menu_book</span>
      </div>
    </div>

    <nav class="nav-links">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }"
        >Home</a
      >
      <a routerLink="/our-story" routerLinkActive="active">Our Story</a>
      <a routerLink="/catalog" routerLinkActive="active">Catalog</a>
      <a routerLink="/browse" routerLinkActive="active">Browse</a>
      <a (click)="scrollToContact()" routerLinkActive="active">Contact</a>
    </nav>

    <div class="navbar-actions">
      <div class="cart-icon-wrapper" (click)="redirect()" *ngIf="!isAdmin()">
        <svg class="p-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
          <path
            d="M24 48C10.7 48 0 58.7 0 72C0 85.3 10.7 96 24 96L69.3 96C73.2 96 76.5 98.8 77.2 102.6L129.3 388.9C135.5 423.1 165.3 448 200.1 448L456 448C469.3 448 480 437.3 480 424C480 410.7 469.3 400 456 400L200.1 400C188.5 400 178.6 391.7 176.5 380.3L171.4 352L475 352C505.8 352 532.2 330.1 537.9 299.8L568.9 133.9C572.6 114.2 557.5 96 537.4 96L124.7 96L124.3 94C119.5 67.4 96.3 48 69.2 48L24 48zM208 576C234.5 576 256 554.5 256 528C256 501.5 234.5 480 208 480C181.5 480 160 501.5 160 528C160 554.5 181.5 576 208 576zM432 576C458.5 576 480 554.5 480 528C480 501.5 458.5 480 432 480C405.5 480 384 501.5 384 528C384 554.5 405.5 576 432 576z"
          />
        </svg>
        <ng-container *ngIf="cartItemCount$ | async as count">
          <div *ngIf="count > 0" class="cart-badge">
            {{ count > 99 ? '99+' : count }}
          </div>
        </ng-container>
      </div>

      <z-switch
        [ngModel]="isDarkMode"
        (ngModelChange)="toggleTheme($event)"
        class="theme-switch"
      ></z-switch>

      <ng-container *ngIf="isAuthenticated$ | async; else guestView">
        <div class="profile-menu">
          <button class="profile-avatar-btn" (click)="toggleProfileMenu($event)">
            <img
              [src]="
                (currentUser$ | async)?.avatarUrl ||
                'data:image/jpeg;base64,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'
              "
              alt="User Avatar"
            />
          </button>

          <div class="dropdown-menu" [class.open]="isProfileMenuOpen">
            <a [routerLink]="getProfileRoute()" class="dropdown-item" (click)="isProfileMenuOpen = false"
              >My Profile</a
            >
            <button class="dropdown-item logout-link" (click)="logout()">Logout</button>
          </div>
        </div>
      </ng-container>

      <ng-template #guestView>
        <div class="auth-buttons">
          <a routerLink="/login" class="login-button">Login</a>
          <a routerLink="/register" class="signup-button">Sign Up</a>
        </div>
      </ng-template>
    </div>
  </div>
</header>
